import{t as j,i as K,c as V,u as q}from"./index.CQfrTCPU.js";import{h as f,ah as O,q as D,D as T,v as F,ai as H,p as k,Y as W,d as x,aj as G,k as P,ad as M,ak as U,r as _,P as Y,b as J,o as y,H as Q,al as X,c as h,N as $,n as Z,j as N,F as b,B as C,a as R,t as I}from"./framework.D6wgcOBA.js";function A(e){return e.install=t=>{e.name&&t.component(e.name,e)},e}const ee=K?window:void 0;function B(e){var t;const r=O(e);return(t=r==null?void 0:r.$el)!=null?t:r}function te(){const e=T(!1),t=H();return t&&F(()=>{e.value=!0},t),e}function ne(e){const t=te();return f(()=>(t.value,!!e()))}function oe(e,t,r={}){const{window:s=ee,...i}=r;let l;const u=ne(()=>s&&"ResizeObserver"in s),o=()=>{l&&(l.disconnect(),l=void 0)},n=f(()=>{const a=O(e);return Array.isArray(a)?a.map(p=>B(p)):[B(a)]}),d=D(n,a=>{if(o(),u.value&&s){l=new ResizeObserver(t);for(const p of a)p&&l.observe(p,i)}},{immediate:!0,flush:"post"}),c=()=>{o(),d()};return j(c),{isSupported:u,stop:c}}const ae=V(()=>{const e=new Map,t=new Map;function r(u=""){let o=t.get(u);o||(o={Instance:k(),comp:T(),attrs:k({}),slots:k({})},t.set(u,o),W(()=>i(u)));const n=e.get(u);return n&&(o.comp.value=n.comp,o.attrs.value=n.attrs,o.slots.value=n.slots),{componentRef:o.Instance,componentNeo:o.comp,componentAttrs:o.attrs,componentSlots:o.slots}}function s(u=""){return t.get(u)}function i(u=""){e.delete(u),t.delete(u)}function l(u="",o){const{comp:n,attrs:d,slots:c}=o,a=s(u);a&&(a.comp.value=n,a.attrs.value=d,a.slots.value=c),e.set(u,{comp:n,attrs:d,slots:c})}return{initComponent:r,setComponent:l,getComponent:s,removeComponent:i}}),se=x({name:"MtComponentNeo",inheritAttrs:!1,__name:"component-neo",props:{uniqueId:{default:""},is:{}},emits:["toggleComponent"],setup(e,{expose:t,emit:r}){const s=e,i=r,{initComponent:l}=ae(),{componentRef:u,componentNeo:o,componentAttrs:n,componentSlots:d}=l(s.uniqueId),c=w=>u.value=w,a=G(),p=f(()=>{const w={};for(const S in n.value)typeof n.value[S]<"u"&&(w[S]=P(n.value[S]));return Object.assign(w,a)}),m=f(()=>o.value||s.is),v=f(()=>m.value?M(m.value,p.value,d.value):M(U,"ComponentNeo is empty")),g=f(()=>typeof m.value=="object"&&"name"in m.value?m.value.name:void 0);return D(m,async()=>{await Y(),i("toggleComponent",g.value,u.value)}),t({componentRef:u}),(w,S)=>_(w.$slots,"default",{Component:v.value,compRef:c,attrs:p.value,compName:g.value},()=>[(y(),J(Q(v.value),{ref:c}))])}});A(se);const le=x({name:"MtExpand",__name:"expand",props:{open:{type:Boolean,default:!1},targetRange:{default:0},transitionTime:{default:200}},setup(e){X(o=>({"3f24abce":r.value}));const t=e,r=f(()=>`${t.transitionTime}ms`),s=k(),i=k(0);oe(s,q(()=>{var o;i.value=((o=s.value)==null?void 0:o.scrollHeight)||0},200));const l=f(()=>i.value>t.targetRange),u=f(()=>i.value?{height:`${!l.value||t.open?i.value:t.targetRange}px`}:{});return(o,n)=>(y(),h("div",{ref_key:"contentRef",ref:s,class:Z(["mt-expand",{"mt-expand-transition":!!o.transitionTime}]),style:$(u.value)},[_(o.$slots,"default",{open:o.open,isOutRange:l.value},void 0,!0)],6))}}),E=(e,t)=>{const r=e.__vccOpts||e;for(const[s,i]of t)r[s]=i;return r},re=E(le,[["__scopeId","data-v-22b2ddba"]]),ye=A(re),ue=x({name:"MtSort",props:{sortList:{type:Array,default:()=>[]},keyName:{type:String,default:"sort-key"}},setup(e,{slots:t}){const r=f(()=>{var s;const i=((s=t.default)==null?void 0:s.call(t))||[],l=z(e.keyName,i),u=Array.from(new Set(e.sortList)).map(o=>l[o]).filter(Boolean);return L(e.keyName,i,e.sortList,u)});return()=>r.value}});function z(e,t,r={}){return t.forEach(s=>{var i;const l=(i=s.props)==null?void 0:i[e];if(l){r[l]?console.warn(`<mt-sort> ${e}: ${l} repeat`):r[l]=s;return}Array.isArray(s.children)&&z(e,s.children,r)}),r}function L(e,t,r,s){const i=[];return t.forEach(l=>{var u;const o=(u=l.props)==null?void 0:u[e];if(o&&r.includes(o)){const n=s.shift();if(n){i.push(n);return}}Array.isArray(l.children)&&(l={...l},l.children=L(e,l.children,r,s)),i.push(l)}),i}const he=A(ue),ce={class:"mt-table"},ie=["colspan","rowspan"],pe=["colspan","rowspan"],me=x({name:"MtTable",__name:"table",props:{data:{default:()=>[]},config:{default:()=>[]}},setup(e){const t=e,r=f(()=>t.config.map(n=>({...n,columns:n.columns.filter(d=>d.title)}))),s=f(()=>t.config.map(n=>({...n,columns:n.columns.filter(d=>d.dataKey)}))),i=f(()=>{const n=r.value.map(c=>c.columns.reduce((a,p)=>{var m;return a+(((m=p.head)==null?void 0:m.colSpan)||1)},0)),d=s.value.map(c=>c.columns.reduce((a,p)=>{var m;return a+(((m=p.cell)==null?void 0:m.colSpan)||1)},0));return Math.max(...n,...d)}),l=f(()=>{const n=r.value.map(d=>d.columns.map(c=>{var a;return((a=c.head)==null?void 0:a.colSpan)||0}));return o(n)}),u=f(()=>{const n=s.value.map(d=>d.columns.map(c=>{var a;return((a=c.cell)==null?void 0:a.colSpan)||0}));return o(n)});function o(n){return n.map(d=>{const c=d.filter(Boolean),a=c.reduce((v,g)=>v+g,0);let p=d.length-c.length,m=i.value-a;return d.map(v=>(!v&&m>0&&(v=Math.ceil(m/p),p--,m-=v),v))})}return(n,d)=>(y(),h("table",ce,[N("thead",null,[(y(!0),h(b,null,C(r.value,(c,a)=>(y(),h("tr",{key:a,style:$(c.headStyle)},[(y(!0),h(b,null,C(c.columns,(p,m)=>{var v,g;return y(),h("th",{key:`${p.title}-${m}`,colspan:l.value[a][m],rowspan:(v=p.head)==null?void 0:v.rowSpan,style:$((g=p.head)==null?void 0:g.style)},[_(n.$slots,"header",{column:p,columnIndex:m,row:c,rowIndex:a},()=>[R(I(p.title),1)],!0)],12,ie)}),128))],4))),128))]),N("tbody",null,[(y(!0),h(b,null,C(n.data,(c,a)=>(y(),h(b,{key:a},[(y(!0),h(b,null,C(s.value,(p,m)=>(y(),h("tr",{key:m,style:$(p.rowStyle)},[(y(!0),h(b,null,C(p.columns,(v,g)=>{var w,S;return y(),h("td",{key:`${v.dataKey}-${g}`,colspan:u.value[m][g],rowspan:(w=v.cell)==null?void 0:w.rowSpan,style:$((S=v.cell)==null?void 0:S.style)},[_(n.$slots,"cell",{column:v,columnIndex:g,dataIndex:a,record:c,row:p,rowIndex:m},()=>[R(I(c[v.dataKey]),1)],!0)],12,pe)}),128))],4))),128))],64))),128))])]))}}),de=E(me,[["__scopeId","data-v-76e3a23b"]]),ge=A(de);export{ge as a,he as i,ye as m};
