import{ao as E,p as k,D as L,Y as q,d as N,ap as K,h as y,k as O,ad as A,aq as j,r as x,q as z,b as F,o as f,H as V,P as H,ar as G,as as P,c as h,N as b,n as U,at as Y,j as I,F as C,B as $,a as R,t as B}from"./framework.BqQ-1jS-.js";function _(t){return t.install=o=>{t.name&&o.component(t.name,t)},t}const J=E(()=>{const t=new Map,o=new Map;function m(l=""){let n=o.get(l);n||(n={Instance:k(),comp:L(),attrs:k({}),slots:k({})},o.set(l,n),q(()=>u(l)));const e=t.get(l);return e&&(n.comp.value=e.comp,n.attrs.value=e.attrs,n.slots.value=e.slots),{componentRef:n.Instance,componentNeo:n.comp,componentAttrs:n.attrs,componentSlots:n.slots}}function a(l=""){return o.get(l)}function u(l=""){t.delete(l),o.delete(l)}function c(l="",n){const{comp:e,attrs:i,slots:p}=n,s=a(l);s&&(s.comp.value=e,s.attrs.value=i,s.slots.value=p),t.set(l,{comp:e,attrs:i,slots:p})}return{initComponent:m,setComponent:c,getComponent:a,removeComponent:u}}),Q=N({name:"MtComponentNeo",inheritAttrs:!1,__name:"component-neo",props:{uniqueId:{default:""},is:{}},emits:["toggleComponent"],setup(t,{expose:o,emit:m}){const a=t,u=m,{initComponent:c}=J(),{componentRef:l,componentNeo:n,componentAttrs:e,componentSlots:i}=c(a.uniqueId),p=w=>l.value=w,s=K(),d=y(()=>{const w={};for(const S in e.value)typeof e.value[S]<"u"&&(w[S]=O(e.value[S]));return Object.assign(w,s)}),r=y(()=>n.value||a.is),v=y(()=>r.value?A(r.value,d.value,i.value):A(j,"ComponentNeo is empty")),g=y(()=>typeof r.value=="object"&&"name"in r.value?r.value.name:void 0);return z(r,async()=>{await H(),u("toggleComponent",g.value,l.value)}),o({componentRef:l}),(w,S)=>x(w.$slots,"default",{Component:v.value,compRef:p,attrs:d.value,compName:g.value},()=>[(f(),F(V(v.value),{ref:p}))])}}),se=_(Q),W=N({name:"MtExpand",__name:"expand",props:{open:{type:Boolean,default:!1},targetRange:{default:0},transitionTime:{default:200}},setup(t){G(n=>({"3f24abce":m.value}));const o=t,m=y(()=>`${o.transitionTime}ms`),a=k(),u=k(0);P(a,Y(()=>{var n;u.value=((n=a.value)==null?void 0:n.scrollHeight)||0},200));const c=y(()=>u.value>o.targetRange),l=y(()=>u.value?{height:`${!c.value||o.open?u.value:o.targetRange}px`}:{});return(n,e)=>(f(),h("div",{ref_key:"contentRef",ref:a,class:U(["mt-expand",{"mt-expand-transition":!!n.transitionTime}]),style:b(l.value)},[x(n.$slots,"default",{open:n.open,isOutRange:c.value},void 0,!0)],6))}}),M=(t,o)=>{const m=t.__vccOpts||t;for(const[a,u]of o)m[a]=u;return m},X=M(W,[["__scopeId","data-v-22b2ddba"]]),re=_(X),Z=N({name:"MtSort",props:{sortList:{type:Array,default:()=>[]},keyName:{type:String,default:"sort-key"}},setup(t,{slots:o}){const m=y(()=>{var a;const u=((a=o.default)==null?void 0:a.call(o))||[],c=T(t.keyName,u),l=Array.from(new Set(t.sortList)).map(n=>c[n]).filter(Boolean);return D(t.keyName,u,t.sortList,l)});return()=>m.value}});function T(t,o,m={}){return o.forEach(a=>{var u;const c=(u=a.props)==null?void 0:u[t];if(c){m[c]?console.warn(`<mt-sort> ${t}: ${c} repeat`):m[c]=a;return}Array.isArray(a.children)&&T(t,a.children,m)}),m}function D(t,o,m,a){const u=[];return o.forEach(c=>{var l;const n=(l=c.props)==null?void 0:l[t];if(n&&m.includes(n)){const e=a.shift();if(e){u.push(e);return}}Array.isArray(c.children)&&(c={...c},c.children=D(t,c.children,m,a)),u.push(c)}),u}const ue=_(Z),ee={class:"mt-table"},te=["colspan","rowspan"],ne=["colspan","rowspan"],ae=N({name:"MtTable",__name:"table",props:{data:{default:()=>[]},config:{default:()=>[]}},setup(t){const o=t,m=y(()=>o.config.map(e=>({...e,columns:e.columns.filter(i=>i.title)}))),a=y(()=>o.config.map(e=>({...e,columns:e.columns.filter(i=>i.dataKey)}))),u=y(()=>{const e=m.value.map(p=>p.columns.reduce((s,d)=>{var r;return s+(((r=d.head)==null?void 0:r.colSpan)||1)},0)),i=a.value.map(p=>p.columns.reduce((s,d)=>{var r;return s+(((r=d.cell)==null?void 0:r.colSpan)||1)},0));return Math.max(...e,...i)}),c=y(()=>{const e=m.value.map(i=>i.columns.map(p=>{var s;return((s=p.head)==null?void 0:s.colSpan)||0}));return n(e)}),l=y(()=>{const e=a.value.map(i=>i.columns.map(p=>{var s;return((s=p.cell)==null?void 0:s.colSpan)||0}));return n(e)});function n(e){return e.map(i=>{const p=i.filter(Boolean),s=p.reduce((v,g)=>v+g,0);let d=i.length-p.length,r=u.value-s;return i.map(v=>(!v&&r>0&&(v=Math.ceil(r/d),d--,r-=v),v))})}return(e,i)=>(f(),h("table",ee,[I("thead",null,[(f(!0),h(C,null,$(m.value,(p,s)=>(f(),h("tr",{key:s,style:b(p.headStyle)},[(f(!0),h(C,null,$(p.columns,(d,r)=>{var v,g;return f(),h("th",{key:`${d.title}-${r}`,colspan:c.value[s][r],rowspan:(v=d.head)==null?void 0:v.rowSpan,style:b((g=d.head)==null?void 0:g.style)},[x(e.$slots,"header",{column:d,columnIndex:r,row:p,rowIndex:s},()=>[R(B(d.title),1)],!0)],12,te)}),128))],4))),128))]),I("tbody",null,[(f(!0),h(C,null,$(e.data,(p,s)=>(f(),h(C,{key:s},[(f(!0),h(C,null,$(a.value,(d,r)=>(f(),h("tr",{key:r,style:b(d.rowStyle)},[(f(!0),h(C,null,$(d.columns,(v,g)=>{var w,S;return f(),h("td",{key:`${v.dataKey}-${g}`,colspan:l.value[r][g],rowspan:(w=v.cell)==null?void 0:w.rowSpan,style:b((S=v.cell)==null?void 0:S.style)},[x(e.$slots,"cell",{column:v,columnIndex:g,dataIndex:s,record:p,row:d,rowIndex:r},()=>[R(B(p[v.dataKey]),1)],!0)],12,ne)}),128))],4))),128))],64))),128))])]))}}),oe=M(ae,[["__scopeId","data-v-76e3a23b"]]),ce=_(oe);export{J as M,ce as a,ue as i,re as m,se as n};
